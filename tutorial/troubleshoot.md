```
Title:        pyDexlink Trouble Shoot (Simplified Chinese)
Date:         2016-08-29
Version:      0.0.1 (Subject to Change)
Prepared For: github.com/njzhangyifei/pyDexLink
```

# pyDexlink 疑难解答

舵机硬件相关问题请见 [DexLink Servo Hardware Documentation](https://github.com/njzhangyifei/pyDexLink/tree/master/docs_hardware)

DexLink 协议标准请见 [DexLink 协议标准](https://static.frank.moe/dexlink_docs/)

## 无法与舵机正常通讯

1. 请检查舵机的地址是否配置正确，出厂后默认地址都是 0x01 ，需要配置后才能并联使用
2. 检查电源是否达到推荐电压
3. 确认通讯的波特率正确无误
4. **（重要）** 检查通讯发送数据包之后收到的回应数据包
5. **（重要）** 若在连续发送请求数据包，请确认请求数据包与回应数据包有无碰撞，
   推荐在收到回应数据包之后再发送下一个请求
6. **（重要）** 请求与请求之间需要有一定的延时以防止碰撞，请尝试增加5ms的延时后再次测试
7. 检查 RS485 的终端电阻
8. 若以上均没有解决问题，请确认在单个舵机，发送同样一条指令的情况下是否有同样问题
9. 若单个舵机在发送该指令的情况下存在问题，请尝试解读回应数据包中的状态字节
10. 尝试使用 `OPERAND_PING` 检测舵机是否回应 Ping 指令，检查状态字节
11. **（重要）** 使用测试程序，尝试同样的指令，确认问题是否依然存在
12. 联系我们

## 无法进行位置/速度控制

1. 检查舵机地址配置
2. **（重要）** 检查是否已经打开扭矩开关
3. 检查是否已经将舵机配置在位置控制模式（连续旋转模式）
4. 检查写入的位置（速度）控制指令是否正确
5. 检查回应数据包中的状态字节是否回报错误
6. 检查写入的位置是否与当前位置（速度是否为0）重合
7. 检查电源是否达到推荐电压
8. 检查单个舵机，发送同样指令是否存在问题
9. **（重要）** 使用测试程序，尝试同样指令，确认问题是否存在
10. 联系我们


## 丢包率高

1. 检查舵机地址配置
2. 加长请求与请求之间的延时，防止请求与回应数据包之间的碰撞
3. 增加请求数据包的重发次数
4. 在收到回应数据包之后再发送下一个请求数据包
5. 确认 RS485 接线正确，确认终端电阻无误

## 关于使用pyDexLink时的延时解决方案

默认设置，串口超时0.01秒，数据包超时0.02秒，重发次数3次。

```python
d = DexLinkSerial('COM3', 115200)   # COM3, 115200
d.open()
```

若波特率小于 115200，可能需要增长超时等待时间。若波特率大于 115200，可以减小时间获得更高性能。

**注意**，以下数值并非推荐数值，只是作为例子使用。此延时与主机的性能也有关系，请实际测定。

**例**：波特率9600，串口超时0.03秒，数据包超时0.06秒，重发次数3次

```python
d = DexLinkSerial('COM3', 9600, 0.03, 0.06, 3)   # COM3, 9600
d.open()
```

串口超时是指字节与字节之间的时间，数据包超时是指接收一个完整数据包的时间。
